// @Author: sarahnouh
// @Date:   2019-03-04
// @Last modified by:   sarahnouh
// @Last modified time: 2019-03-04
import React, { Component } from "react";
interface subnavProps {
  /**
   *A function that handles changing the language from the parent
   *@type void
   */
  handleLanguageChange: () => void;
  /**
   *the current language
   *@type string
   */
  language: string;
  /**
   *the text for the search placeholder based on the current language
   *@type string
   */
  searchPlaceholder: string;
}
interface subnavState {
  /**
   *A boolean to toggle search form on click
   *@type boolean
   */
  showSearch: boolean;
  /**
   *A boolean used to add background after certain vertical scroll position
   *@type boolean
   */
  hasBackground: boolean;
}
class SubNav extends Component<subnavProps, subnavState> {
  constructor(props: subnavProps) {
    super(props);
    this.state = {
      showSearch: false,
      hasBackground: false
    };
  }
  /**
   * A function invoked when the component is mounted
   * @param {}
   */
  componentDidMount() {
    window.addEventListener("scroll", () => {
      if (window.scrollY > 540) {
        this.setState({
          hasBackground: true
        });
      } else {
        this.setState({
          hasBackground: false
        });
      }
    });
  }
  /**
   * A function Invoked on click to handle toggling language
   * @param {}
   * @public
   */
  handleLanguageChange = () => {
    this.props.handleLanguageChange();
  };

  /**
   * A function Invoked on click to handle toggling search form
   * @param {}
   * @public
   */
  handleShowSearch = () => {
    this.setState({
      showSearch: !this.state.showSearch
    });
  };
  render() {
    return (
      <ul
        className={
          "subnav nav fixed-top justify-content-end " +
          (this.state.hasBackground ? "has-background" : "")
        }
      >
        <li className="nav-item ">
          <a
            className="nav-link subnav-lang"
            href="#"
            onClick={() => {
              this.handleLanguageChange();
            }}
          >
            {this.props.language}
          </a>
        </li>
        <li className="nav-item d-none d-md-block">
          <a className="nav-link" href="#">
            <svg width="0.278in" height="0.25in">
              <path
                fillRule="evenodd"
                fill="rgb(160, 160, 160)"
                d="M18.566,12.809 L17.940,12.809 L17.940,10.189 C17.940,8.943 16.759,7.850 15.412,7.850 L10.527,7.850 L10.527,5.604 L11.564,5.604 C12.353,5.602 12.997,4.957 12.998,4.165 L12.998,1.437 C12.997,0.646 12.353,0.001 11.564,-0.000 L8.434,-0.000 C7.645,0.001 7.002,0.646 7.000,1.438 L7.000,4.165 C7.002,4.957 7.645,5.602 8.434,5.604 L9.472,5.604 L9.472,7.850 L4.587,7.850 C3.240,7.850 2.058,8.943 2.058,10.189 L2.058,12.809 L1.433,12.809 C0.644,12.810 0.001,13.455 -0.001,14.247 L-0.001,16.561 C0.001,17.353 0.644,17.998 1.433,18.000 L3.739,18.000 C4.529,17.998 5.172,17.353 5.173,16.561 L5.173,14.247 C5.172,13.455 4.529,12.810 3.739,12.809 L3.114,12.809 L3.114,10.189 C3.114,9.456 3.891,8.909 4.587,8.909 L9.472,8.909 L9.472,12.809 L8.846,12.809 C8.057,12.810 7.414,13.455 7.412,14.247 L7.412,16.561 C7.414,17.353 8.057,17.998 8.846,18.000 L11.153,18.000 C11.942,17.998 12.585,17.353 12.586,16.561 L12.586,14.247 C12.585,13.455 11.942,12.810 11.153,12.809 L10.527,12.809 L10.527,8.909 L15.412,8.909 C16.107,8.909 16.885,9.456 16.885,10.189 L16.885,12.809 L16.259,12.809 C15.470,12.810 14.827,13.455 14.826,14.247 L14.826,16.561 C14.827,17.353 15.470,17.998 16.259,18.000 L18.566,18.000 C19.355,17.998 19.998,17.353 19.999,16.561 L19.999,14.247 C19.998,13.455 19.355,12.810 18.566,12.809 ZM18.944,14.247 L18.944,16.561 C18.944,16.771 18.774,16.941 18.566,16.941 L16.259,16.941 C16.051,16.941 15.881,16.771 15.881,16.561 L15.881,14.247 C15.881,14.038 16.051,13.868 16.259,13.868 L18.566,13.868 C18.774,13.868 18.944,14.038 18.944,14.247 ZM8.468,14.247 C8.468,14.038 8.638,13.868 8.846,13.868 L11.153,13.868 C11.361,13.868 11.531,14.038 11.531,14.247 L11.531,16.561 C11.531,16.771 11.361,16.941 11.153,16.941 L8.846,16.941 C8.638,16.941 8.468,16.771 8.468,16.561 L8.468,14.247 ZM11.564,4.544 L8.434,4.544 C8.226,4.544 8.056,4.375 8.056,4.165 L8.056,1.438 C8.056,1.229 8.226,1.058 8.434,1.058 L11.564,1.058 C11.773,1.058 11.943,1.229 11.943,1.438 L11.943,4.165 C11.943,4.375 11.773,4.544 11.564,4.544 ZM4.118,16.561 C4.118,16.771 3.948,16.941 3.739,16.941 L1.433,16.941 C1.224,16.941 1.054,16.771 1.054,16.561 L1.054,14.247 C1.054,14.038 1.224,13.868 1.433,13.868 L3.739,13.868 C3.948,13.868 4.118,14.038 4.118,14.247 L4.118,16.561 Z"
              />
            </svg>
          </a>
        </li>
        <li className="nav-item d-none d-md-block">
          <a className="nav-link" href="#">
            <svg width="0.292in" height="0.194in">
              <path
                fillRule="evenodd"
                fill="rgb(160, 160, 160)"
                d="M20.863,7.344 C20.854,7.385 20.838,7.422 20.820,7.461 C20.807,7.488 20.794,7.513 20.776,7.537 C20.764,7.555 20.760,7.575 20.746,7.592 C17.886,10.813 14.885,12.617 11.823,12.954 C11.796,12.956 11.770,12.958 11.743,12.958 C11.428,12.958 11.155,12.750 11.115,12.467 C11.072,12.160 11.319,11.880 11.666,11.842 C14.275,11.556 16.886,10.008 19.432,7.246 C18.477,6.211 17.506,5.330 16.539,4.640 C16.266,4.446 16.223,4.093 16.443,3.853 C16.664,3.612 17.063,3.576 17.334,3.769 C18.484,4.588 19.632,5.640 20.746,6.895 C20.760,6.912 20.764,6.932 20.777,6.949 C20.794,6.974 20.806,6.998 20.819,7.025 C20.838,7.064 20.855,7.102 20.863,7.142 C20.870,7.176 20.870,7.209 20.870,7.243 C20.870,7.277 20.870,7.310 20.863,7.344 ZM8.591,13.680 C8.475,13.864 8.259,13.967 8.037,13.967 C7.932,13.967 7.826,13.945 7.728,13.896 C7.422,13.745 7.313,13.405 7.484,13.134 L7.846,12.562 C4.331,11.475 1.722,8.663 1.048,7.611 C0.954,7.520 0.899,7.410 0.887,7.290 C0.883,7.276 0.873,7.255 0.873,7.246 C0.873,7.231 0.882,7.217 0.883,7.202 C0.886,7.161 0.897,7.121 0.911,7.080 C0.922,7.051 0.931,7.024 0.947,6.997 C0.957,6.978 0.958,6.959 0.971,6.942 C1.030,6.860 2.438,4.903 4.837,3.348 C7.925,1.347 11.224,0.949 14.415,2.175 L14.986,1.271 C15.156,1.001 15.544,0.904 15.849,1.056 C16.155,1.206 16.264,1.547 16.094,1.817 L8.591,13.680 ZM2.274,7.243 C2.973,8.106 5.262,10.657 8.478,11.562 L8.867,10.947 C6.958,10.242 5.653,8.573 5.653,6.692 C5.653,5.386 6.273,4.209 7.264,3.368 C4.687,4.479 2.885,6.491 2.274,7.243 ZM10.877,3.199 C8.695,3.199 6.920,4.766 6.920,6.692 C6.920,8.160 7.973,9.457 9.491,9.960 L13.302,3.935 C12.611,3.459 11.766,3.199 10.877,3.199 Z"
              />
            </svg>
          </a>
        </li>
        <li className="nav-item d-none d-md-block">
          <a className="nav-link" href="#">
            <svg width="0.264in" height="0.25in">
              <path
                fillRule="evenodd"
                fill="rgb(160, 160, 160)"
                d="M17.755,7.242 C16.735,9.675 15.306,11.805 13.511,13.571 C13.506,13.575 13.502,13.580 13.498,13.584 C11.681,15.325 9.492,16.711 6.991,17.701 C6.491,17.899 5.997,17.998 5.526,17.998 C5.081,17.998 4.656,17.911 4.262,17.735 C3.423,17.361 2.794,16.625 2.440,15.605 C2.284,15.153 2.286,14.709 2.447,14.290 C2.806,13.340 5.583,11.358 6.634,11.302 C7.635,11.252 8.145,11.975 8.389,12.322 C8.594,12.613 8.517,13.010 8.218,13.210 C7.918,13.408 7.510,13.334 7.305,13.043 C7.016,12.632 6.885,12.568 6.708,12.576 C6.140,12.641 3.902,14.234 3.678,14.733 C3.622,14.879 3.624,15.023 3.684,15.198 C3.919,15.876 4.308,16.352 4.809,16.575 C5.285,16.787 5.869,16.768 6.496,16.520 C8.840,15.591 10.888,14.296 12.582,12.669 C12.583,12.668 12.583,12.668 12.584,12.667 C14.255,11.022 15.586,9.034 16.539,6.760 C16.795,6.150 16.815,5.582 16.596,5.120 C16.367,4.633 15.877,4.256 15.180,4.028 C14.999,3.969 14.852,3.967 14.702,4.021 C14.187,4.240 12.548,6.414 12.481,6.960 C12.472,7.139 12.539,7.266 12.961,7.547 C13.261,7.745 13.337,8.142 13.133,8.433 C12.928,8.724 12.520,8.798 12.220,8.599 C11.863,8.362 11.119,7.868 11.170,6.893 C11.227,5.873 13.268,3.174 14.242,2.826 C14.676,2.669 15.132,2.666 15.598,2.818 C16.647,3.162 17.405,3.774 17.790,4.589 C18.163,5.380 18.151,6.296 17.755,7.242 ZM8.339,4.981 C6.598,4.981 5.181,6.358 5.181,8.049 C5.181,8.402 4.887,8.688 4.525,8.687 C4.162,8.687 3.868,8.402 3.868,8.049 C3.869,5.655 5.874,3.705 8.339,3.705 C8.702,3.705 8.995,3.991 8.996,4.343 C8.996,4.695 8.702,4.981 8.339,4.981 ZM8.339,1.273 C6.477,1.273 4.726,1.978 3.409,3.259 C2.092,4.538 1.367,6.240 1.367,8.049 C1.367,8.402 1.074,8.687 0.711,8.687 C0.348,8.687 0.055,8.402 0.055,8.049 C0.054,5.899 0.916,3.877 2.481,2.356 C4.045,0.836 6.127,-0.002 8.339,-0.002 C8.702,-0.002 8.996,0.284 8.996,0.636 C8.996,0.989 8.702,1.273 8.339,1.273 Z"
              />
            </svg>
          </a>
        </li>
        <li
          className="nav-item subnav-search-icon"
          onClick={() => {
            this.handleShowSearch();
          }}
        >
          <a className="nav-link" href="#">
            <svg width="0.25in" height="0.25in">
              <path
                fillRule="evenodd"
                fill="rgb(160, 160, 160)"
                d="M17.836,17.080 L13.463,12.706 C14.636,11.357 15.346,9.596 15.346,7.673 C15.346,3.438 11.903,-0.002 7.673,-0.002 C3.439,-0.002 -0.001,3.442 -0.001,7.673 C-0.001,11.904 3.443,15.348 7.673,15.348 C9.596,15.348 11.356,14.638 12.704,13.464 L17.078,17.838 C17.182,17.942 17.322,17.998 17.457,17.998 C17.593,17.998 17.733,17.946 17.836,17.838 C18.044,17.631 18.044,17.288 17.836,17.080 ZM1.072,7.673 C1.072,4.034 4.033,1.076 7.669,1.076 C11.308,1.076 14.265,4.037 14.265,7.673 C14.265,11.308 11.308,14.274 7.669,14.274 C4.033,14.274 1.072,11.313 1.072,7.673 Z"
              />
            </svg>
          </a>
          <form
            className={
              "form-inline subnav-search-form " +
              (this.state.showSearch ? "is-shown" : "")
            }
          >
            <input
              className="form-control mr-sm-2"
              type="search"
              placeholder={this.props.searchPlaceholder}
              aria-label="Search"
            />
          </form>
        </li>
      </ul>
    );
  }
}
export default SubNav;
